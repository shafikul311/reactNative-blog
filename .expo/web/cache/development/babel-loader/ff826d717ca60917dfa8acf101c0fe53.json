{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nvar _jsxFileName = \"/Users/hein/repos/react/react-native-shared-element/src/SharedElement.tsx\";\nimport * as React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport findNodeHandle from \"react-native-web/dist/exports/findNodeHandle\";\nexport function nodeFromRef(ref, isParent, parentInstance) {\n  var nodeHandle = ref ? findNodeHandle(ref) : undefined;\n  return nodeHandle ? {\n    ref: ref,\n    nodeHandle: nodeHandle,\n    isParent: isParent || false,\n    parentInstance: parentInstance\n  } : null;\n}\nexport var SharedElement = function (_React$Component) {\n  _inherits(SharedElement, _React$Component);\n\n  function SharedElement() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SharedElement);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SharedElement)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this._node = null;\n\n    _this.onSetRef = function (ref) {\n      _this._node = nodeFromRef(ref, true, _assertThisInitialized(_this));\n\n      if (_this.props.onNode) {\n        _this.props.onNode(_this._node);\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(SharedElement, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (!prevProps.onNode && this.props.onNode && this._node) {\n        this.props.onNode(this._node);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          onNode = _this$props.onNode,\n          otherProps = _objectWithoutProperties(_this$props, [\"onNode\"]);\n\n      return React.createElement(View, _extends({\n        ref: this.onSetRef,\n        collapsable: false\n      }, otherProps, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        }\n      }));\n    }\n  }]);\n\n  return SharedElement;\n}(React.Component);","map":{"version":3,"sources":["SharedElement.tsx"],"names":["nodeHandle","ref","findNodeHandle","isParent","parentInstance","SharedElement","React","prevProps","nodeFromRef","onNode","otherProps"],"mappings":";;;;;;;;;AAAA,OAAO,KAAP,KAAA,MAAA,OAAA;;;AASA,OAAO,SAAA,WAAA,CAAA,GAAA,EAAA,QAAA,EAAA,cAAA,EAIqB;AAC1B,MAAMA,UAAU,GAAGC,GAAG,GAAGC,cAAc,CAAjB,GAAiB,CAAjB,GAAtB,SAAA;AACA,SAAOF,UAAU,GACb;AACEC,IAAAA,GAAG,EADL,GAAA;AAEED,IAAAA,UAAU,EAFZ,UAAA;AAGEG,IAAAA,QAAQ,EAAEA,QAAQ,IAHpB,KAAA;AAIEC,IAAAA,cAAc,EALH;AACb,GADa,GAAjB,IAAA;AAUF;AAAA,OAAA,IAAaC,aAAb,GAAA,UAAA,gBAAA,EAAA;AAAA,EAAA,SAAA,CAAA,aAAA,EAAA,gBAAA,CAAA;;AAAA,WAAA,aAAA,GAAA;AAAA,QAAA,gBAAA;;AAAA,QAAA,KAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,aAAA,CAAA;;AAAA,SAAA,IAAA,IAAA,GAAA,SAAA,CAAA,MAAA,EAAA,IAAA,GAAA,IAAA,KAAA,CAAA,IAAA,CAAA,EAAA,IAAA,GAAA,CAAA,EAAA,IAAA,GAAA,IAAA,EAAA,IAAA,EAAA,EAAA;AAAA,MAAA,IAAA,CAAA,IAAA,CAAA,GAAA,SAAA,CAAA,IAAA,CAAA;AAAA;;AAAA,IAAA,KAAA,GAAA,0BAAA,CAAA,IAAA,EAAA,CAAA,gBAAA,GAAA,eAAA,CAAA,aAAA,CAAA,EAAA,IAAA,CAAA,KAAA,CAAA,gBAAA,EAAA,CAAA,IAAA,EAAA,MAAA,CAAA,IAAA,CAAA,CAAA,CAAA;AAAA,IAAA,KAAA,CAAA,KAAA,GAAA,IAAA;;AAAA,IAAA,KAAA,CAAA,QAAA,GASqB,UAAA,GAAA,EAAc;AAC/B,MAAA,KAAA,CAAA,KAAA,GAAaG,WAAW,CAAA,GAAA,EAAA,IAAA,EAAA,sBAAA,CAAxB,KAAwB,CAAA,CAAxB;;AACA,UAAI,KAAA,CAAA,KAAA,CAAJ,MAAA,EAAuB;AACrB,QAAA,KAAA,CAAA,KAAA,CAAA,MAAA,CAAkB,KAAA,CAAlB,KAAA;AAEH;AAdH,KAAA;;AAAA,WAAA,KAAA;AAAA;;AAAA,EAAA,YAAA,CAAA,aAAA,EAAA,CAAA;AAAA,IAAA,GAAA,EAAA,oBAAA;AAAA,IAAA,KAAA,EAAA,SAAA,kBAAA,CAAA,SAAA,EACoD;AAChD,UAAI,CAACD,SAAS,CAAV,MAAA,IAAqB,KAAA,KAAA,CAArB,MAAA,IAA0C,KAA9C,KAAA,EAA0D;AACxD,aAAA,KAAA,CAAA,MAAA,CAAkB,KAAlB,KAAA;AAEH;AALH;AAAA,GAAA,EAAA;AAAA,IAAA,GAAA,EAAA,QAAA;AAAA,IAAA,KAAA,EAAA,SAAA,MAAA,GAgBW;AAAA,UAAA,WAAA,GAIH,KAJG,KAAA;AAAA,UAELE,MAFK,GAAA,WAAA,CAAA,MAAA;AAAA,UAGFC,UAHE,GAAA,wBAAA,CAAA,WAAA,EAAA,CAAA,QAAA,CAAA,CAAA;;AAKP,aAAO,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA,QAAA,CAAA;AAAM,QAAA,GAAG,EAAE,KAAX,QAAA;AAA0B,QAAA,WAAW,EAArC;AAAA,OAAA,EAAA,UAAA,EAAA;AAAA,QAAA,QAAA,EAAA;AAAA,UAAA,QAAA,EAAA,YAAA;AAAA,UAAA,UAAA,EAAP;AAAO;AAAA,OAAA,CAAA,CAAP;AArBJ;AAAA,GAAA,CAAA,CAAA;;AAAA,SAAA,aAAA;AAAA,CAAA,CAAmCJ,KAAK,CAAxC,SAAA,CAAA","sourcesContent":["import * as React from 'react';\nimport { View, findNodeHandle, ViewStyle } from 'react-native';\nimport { SharedElementNode } from './types';\n\nexport type SharedElementProps = ViewStyle & {\n  children: React.ReactNode;\n  onNode: (node: SharedElementNode | null) => void;\n};\n\nexport function nodeFromRef(\n  ref: any,\n  isParent?: boolean,\n  parentInstance?: any\n): SharedElementNode | null {\n  const nodeHandle = ref ? findNodeHandle(ref) : undefined;\n  return nodeHandle\n    ? {\n        ref,\n        nodeHandle,\n        isParent: isParent || false,\n        parentInstance,\n      }\n    : null;\n}\n\nexport class SharedElement extends React.Component<SharedElementProps> {\n  componentDidUpdate(prevProps: SharedElementProps) {\n    if (!prevProps.onNode && this.props.onNode && this._node) {\n      this.props.onNode(this._node);\n    }\n  }\n\n  private _node: SharedElementNode | null = null;\n\n  private onSetRef = (ref: any) => {\n    this._node = nodeFromRef(ref, true, this);\n    if (this.props.onNode) {\n      this.props.onNode(this._node);\n    }\n  };\n\n  render() {\n    const {\n      onNode, //eslint-disable-line @typescript-eslint/no-unused-vars\n      ...otherProps\n    } = this.props;\n    return <View ref={this.onSetRef} collapsable={false} {...otherProps} />;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}