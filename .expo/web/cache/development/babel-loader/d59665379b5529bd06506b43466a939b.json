{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport { Rect } from \"./Rect.web\";\nexport var RNSharedElementContent = function () {\n  function RNSharedElementContent(element, size) {\n    _classCallCheck(this, RNSharedElementContent);\n\n    this.element = element;\n    this.size = size;\n  }\n\n  _createClass(RNSharedElementContent, null, [{\n    key: \"getSize\",\n    value: function getSize(element) {\n      return new Promise(function (resolve) {\n        if (element.style.backgroundImage) {\n          var img = document.createElement(\"img\");\n\n          img.onload = function () {\n            resolve(new Rect({\n              x: 0,\n              y: 0,\n              width: img.width,\n              height: img.height\n            }));\n          };\n\n          img.onerror = function () {\n            return resolve(null);\n          };\n\n          var url = element.style.backgroundImage;\n          img.src = url.substring(5, url.length - 2);\n          return;\n        }\n\n        resolve(new Rect({\n          x: 0,\n          y: 0,\n          width: element.clientWidth || 0,\n          height: element.clientHeight || 0\n        }));\n      });\n    }\n  }, {\n    key: \"getLayout\",\n    value: function getLayout(layout, content, resizeMode, reverse) {\n      if (!content) return layout;\n      if (!content.element.style.backgroundImage) return layout;\n      var width = layout.width,\n          height = layout.height;\n      var contentAspectRatio = content.size.width / content.size.height;\n      var lo = width / height < contentAspectRatio;\n      var aspectRatioCriteria = reverse ? !lo : lo;\n\n      switch (resizeMode) {\n        case \"stretch\":\n        case \"100% 100%\":\n          break;\n\n        case \"cover\":\n          if (aspectRatioCriteria) {\n            width = height * contentAspectRatio;\n          } else {\n            height = width / contentAspectRatio;\n          }\n\n          break;\n\n        case \"center\":\n          width = content.size.width;\n          height = content.size.height;\n          break;\n\n        case \"contain\":\n        default:\n          if (aspectRatioCriteria) {\n            height = width / contentAspectRatio;\n          } else {\n            width = height * contentAspectRatio;\n          }\n\n          break;\n      }\n\n      return new Rect({\n        x: layout.x + (layout.width - width) / 2,\n        y: layout.y + (layout.height - height) / 2,\n        width: width,\n        height: height\n      });\n    }\n  }]);\n\n  return RNSharedElementContent;\n}();","map":{"version":3,"sources":["../../src/web/RNSharedElementContent.web.ts"],"names":[],"mappings":"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","sourcesContent":["import { Rect } from \"./Rect.web\";\nimport { IHTMLElement } from \"./types\";\n\nexport class RNSharedElementContent {\n  public readonly element: IHTMLElement;\n  public readonly size: Rect;\n\n  constructor(element: IHTMLElement, size: Rect) {\n    this.element = element;\n    this.size = size;\n  }\n\n  static getSize(element: IHTMLElement): Promise<Rect | null> {\n    return new Promise(resolve => {\n      if (element.style.backgroundImage) {\n        const img = document.createElement(\"img\");\n        img.onload = () => {\n          resolve(\n            new Rect({\n              x: 0,\n              y: 0,\n              width: img.width,\n              height: img.height\n            })\n          );\n        };\n        img.onerror = () => resolve(null);\n        const url = element.style.backgroundImage;\n        img.src = url.substring(5, url.length - 2);\n        return;\n      }\n      resolve(\n        new Rect({\n          x: 0,\n          y: 0,\n          width: element.clientWidth || 0,\n          height: element.clientHeight || 0\n        })\n      );\n    });\n  }\n\n  static getLayout(\n    layout: Rect,\n    content: RNSharedElementContent | null,\n    resizeMode: string,\n    reverse?: boolean\n  ) {\n    if (!content) return layout;\n    if (!content.element.style.backgroundImage) return layout;\n    let { width, height } = layout;\n    const contentAspectRatio = content.size.width / content.size.height;\n    const lo = width / height < contentAspectRatio;\n    const aspectRatioCriteria = reverse ? !lo : lo;\n    switch (resizeMode) {\n      case \"stretch\":\n      case \"100% 100%\":\n        // nop\n        break;\n      case \"cover\":\n        if (aspectRatioCriteria) {\n          width = height * contentAspectRatio;\n        } else {\n          height = width / contentAspectRatio;\n        }\n        break;\n      case \"center\":\n        width = content.size.width;\n        height = content.size.height;\n        break;\n      case \"contain\":\n      default:\n        if (aspectRatioCriteria) {\n          height = width / contentAspectRatio;\n        } else {\n          width = height * contentAspectRatio;\n        }\n        break;\n    }\n    return new Rect({\n      x: layout.x + (layout.width - width) / 2,\n      y: layout.y + (layout.height - height) / 2,\n      width,\n      height\n    });\n  }\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}