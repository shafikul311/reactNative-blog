{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNativeSharedElement = require(\"react-native-shared-element\");\n\nvar _SharedElementSceneContext = _interopRequireDefault(require(\"./SharedElementSceneContext\"));\n\nvar _jsxFileName = \"/Users/hein/repos/react/react-navigation-sharedelement/src/SharedElement.tsx\";\n\nvar SharedElement = function (_React$Component) {\n  (0, _inherits2.default)(SharedElement, _React$Component);\n\n  function SharedElement(props) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, SharedElement);\n    _this = (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(SharedElement).call(this, props));\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"node\", null);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"sharedId\", '');\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"sceneData\", null);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"onSetNode\", function (node) {\n      if (_this.node === node) {\n        return;\n      }\n\n      if (_this.sceneData && _this.node && _this.sharedId) {\n        _this.sceneData.removeNode(_this.sharedId, _this.node);\n      }\n\n      _this.node = node;\n\n      if (_this.sceneData && _this.node && _this.sharedId) {\n        _this.sceneData.addNode(_this.sharedId, _this.node);\n      }\n\n      _this.node = node;\n    });\n    _this.sharedId = props.id;\n    return _this;\n  }\n\n  (0, _createClass2.default)(SharedElement, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          id = _this$props.id,\n          otherProps = (0, _objectWithoutProperties2.default)(_this$props, [\"id\"]);\n      return React.createElement(_SharedElementSceneContext.default.Consumer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31\n        }\n      }, function (sceneData) {\n        _this2.sceneData = sceneData;\n        return React.createElement(_reactNativeSharedElement.SharedElement, (0, _extends2.default)({}, otherProps, {\n          onNode: _this2.onSetNode,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 38\n          }\n        }));\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var id = this.props.id;\n\n      if (this.sharedId !== id) {\n        if (this.sceneData && this.sharedId && this.node) {\n          this.sceneData.removeNode(this.sharedId, this.node);\n        }\n\n        this.sharedId = id;\n\n        if (this.sceneData && this.sharedId && this.node) {\n          this.sceneData.addNode(this.sharedId, this.node);\n        }\n      }\n    }\n  }]);\n  return SharedElement;\n}(React.Component);\n\nvar _default = SharedElement;\nexports.default = _default;","map":{"version":3,"sources":["SharedElement.tsx"],"names":["SharedElement","React","Component","props","id","otherProps"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  SharedElement as RawSharedElement,\n  SharedElementProps as RawSharedElementProps,\n} from 'react-native-shared-element';\nimport { SharedElementNode } from './types';\nimport SharedElementSceneContext from './SharedElementSceneContext';\nimport SharedElementSceneData from './SharedElementSceneData';\n// import invariant from '../utils/invariant';\n\nexport type SharedElementProps = Omit<RawSharedElementProps, 'onNode'> & {\n  id: string;\n};\n\nclass SharedElement extends React.Component<SharedElementProps> {\n  private node: SharedElementNode | null = null;\n  private sharedId: string = '';\n  private sceneData: SharedElementSceneData | null = null;\n\n  constructor(props: SharedElementProps) {\n    super(props);\n    this.sharedId = props.id;\n  }\n\n  render() {\n    const {\n      id, //eslint-disable-line @typescript-eslint/no-unused-vars\n      ...otherProps\n    } = this.props;\n    return (\n      <SharedElementSceneContext.Consumer>\n        {sceneData => {\n          /*invariant(\n            sceneData != null,\n            'The SharedElementSceneContext is not set, did you forget to wrap your scene component with `createSharedElementScene(..)`?'\n          );*/\n          this.sceneData = sceneData;\n          return <RawSharedElement {...otherProps} onNode={this.onSetNode} />;\n        }}\n      </SharedElementSceneContext.Consumer>\n    );\n  }\n\n  componentDidUpdate() {\n    const { id } = this.props;\n    if (this.sharedId !== id) {\n      if (this.sceneData && this.sharedId && this.node) {\n        this.sceneData.removeNode(this.sharedId, this.node);\n      }\n      this.sharedId = id;\n      if (this.sceneData && this.sharedId && this.node) {\n        this.sceneData.addNode(this.sharedId, this.node);\n      }\n    }\n  }\n\n  private onSetNode = (node: SharedElementNode | null) => {\n    if (this.node === node) {\n      return;\n    }\n    if (this.sceneData && this.node && this.sharedId) {\n      this.sceneData.removeNode(this.sharedId, this.node);\n    }\n    this.node = node;\n    if (this.sceneData && this.node && this.sharedId) {\n      this.sceneData.addNode(this.sharedId, this.node);\n    }\n    this.node = node;\n  };\n}\n\nexport default SharedElement;\n"]},"metadata":{},"sourceType":"script"}